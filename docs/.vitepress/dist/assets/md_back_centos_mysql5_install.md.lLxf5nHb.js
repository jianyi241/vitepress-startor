import{_ as i,c as a,o as e,ae as t}from"./chunks/framework.Cd-3tpCq.js";const c=JSON.parse('{"title":"CentOS安装MySQL5遇到的的一些问题","description":"","frontmatter":{},"headers":[],"relativePath":"md/back/centos_mysql5_install.md","filePath":"md/back/centos_mysql5_install.md"}'),l={name:"md/back/centos_mysql5_install.md"};function n(h,s,p,r,o,d){return e(),a("div",null,s[0]||(s[0]=[t('<h1 id="centos安装mysql5遇到的的一些问题" tabindex="-1">CentOS安装MySQL5遇到的的一些问题 <a class="header-anchor" href="#centos安装mysql5遇到的的一些问题" aria-label="Permalink to &quot;CentOS安装MySQL5遇到的的一些问题&quot;">​</a></h1><p>好久没在linux上安装过mysql了，最近安装使用遇到一些问题，记录一下。</p><h2 id="mysql启动成功-可是远程无法连接-navicat测试连接-测试超时-暂时能想到的就是防火墙问题-因为部署web代码时遇到过一次了-问了下ai" tabindex="-1">mysql启动成功，可是远程无法连接，navicat测试连接，测试超时，暂时能想到的就是防火墙问题，因为部署web代码时遇到过一次了，问了下AI: <a class="header-anchor" href="#mysql启动成功-可是远程无法连接-navicat测试连接-测试超时-暂时能想到的就是防火墙问题-因为部署web代码时遇到过一次了-问了下ai" aria-label="Permalink to &quot;mysql启动成功，可是远程无法连接，navicat测试连接，测试超时，暂时能想到的就是防火墙问题，因为部署web代码时遇到过一次了，问了下AI:&quot;">​</a></h2><h3 id="_1-检查sql配置文件" tabindex="-1">1. 检查SQL配置文件 <a class="header-anchor" href="#_1-检查sql配置文件" aria-label="Permalink to &quot;1. 检查SQL配置文件&quot;">​</a></h3><p>确认 MySQL 配置文件（通常是 /etc/my.cnf 或 /etc/my.cnf.d/mysqld.cnf）中的绑定地址设置。确保 bind-address 配置项设置为 0.0.0.0 或服务器的 IP 地址，以允许外部连接：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[mysqld]</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind-address</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0.0.0</span></span></code></pre></div><h3 id="_2-检查防火墙设置" tabindex="-1">2. 检查防火墙设置 <a class="header-anchor" href="#_2-检查防火墙设置" aria-label="Permalink to &quot;2. 检查防火墙设置&quot;">​</a></h3><p>如果防火墙正在运行，它可能会阻止 MySQL 的默认端口（3306）的访问。使用以下命令检查防火墙状态：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --state</span></span></code></pre></div><p>如果防火墙已启用，可以使用以下命令允许 MySQL 端口：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-service=mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --reload</span></span></code></pre></div><h3 id="_3-检查-selinux-设置" tabindex="-1">3.检查 SELinux 设置 <a class="header-anchor" href="#_3-检查-selinux-设置" aria-label="Permalink to &quot;3.检查 SELinux 设置&quot;">​</a></h3><p>如果启用了 SELinux，它也可能会阻止 MySQL 连接。可以暂时将 SELinux 设置为宽松模式，以测试是否是 SELinux 导致的问题：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> setenforce</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span></code></pre></div><p>要永久更改 SELinux 设置，需要编辑 /etc/selinux/config 文件并将 SELINUX=enforcing 更改为 SELINUX=permissive，然后重启系统。</p><h2 id="通常的问题一般情况下是防火墙导致的-关闭防火墙" tabindex="-1">通常的问题一般情况下是防火墙导致的，关闭防火墙 <a class="header-anchor" href="#通常的问题一般情况下是防火墙导致的-关闭防火墙" aria-label="Permalink to &quot;通常的问题一般情况下是防火墙导致的，关闭防火墙&quot;">​</a></h2><p>仍然无法连接，不过这个给出了提示：&quot;not allowed connect&quot;，mysql权限问题，修改权限让远程可连接mysql:</p><h3 id="确认用户权限" tabindex="-1">确认用户权限 <a class="header-anchor" href="#确认用户权限" aria-label="Permalink to &quot;确认用户权限&quot;">​</a></h3><p>首先，登录到 MySQL，查看 root 用户或其他用户的权限：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span></span></code></pre></div><p>然后运行以下 SQL 查询来检查用户的主机限制：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> User, Host </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mysql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h4 id="此时发现无法执行sql-提示-error-1820-hy000-you-must-reset-your-password-using-alter-user-statement-before-executing-this-statement-意思是需要先将临时密码修改才行-修改临时密码" tabindex="-1">此时发现无法执行sql，提示：<code>ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.</code>意思是需要先将临时密码修改才行，修改临时密码：<br> <a class="header-anchor" href="#此时发现无法执行sql-提示-error-1820-hy000-you-must-reset-your-password-using-alter-user-statement-before-executing-this-statement-意思是需要先将临时密码修改才行-修改临时密码" aria-label="Permalink to &quot;此时发现无法执行sql，提示：`ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.`意思是需要先将临时密码修改才行，修改临时密码：&lt;br&gt;&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> USER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;123123&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h4 id="执行sql提示-error-1819-hy000-your-password-does-not-satisfy-the-current-policy-requirements-大概意思是不合规-经查-在mysql5-7之后-密码必须遵循最新的密码策略-要求使用强密码-否则无法更改-规则为" tabindex="-1">执行sql提示：<code>ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</code>，大概意思是不合规，经查，在mysql5.7之后，密码必须遵循最新的密码策略，要求使用强密码，否则无法更改，规则为： <a class="header-anchor" href="#执行sql提示-error-1819-hy000-your-password-does-not-satisfy-the-current-policy-requirements-大概意思是不合规-经查-在mysql5-7之后-密码必须遵循最新的密码策略-要求使用强密码-否则无法更改-规则为" aria-label="Permalink to &quot;执行sql提示：`ERROR 1819 (HY000): Your password does not satisfy the current policy requirements`，大概意思是不合规，经查，在mysql5.7之后，密码必须遵循最新的密码策略，要求使用强密码，否则无法更改，规则为：&quot;">​</a></h4><ol><li>长度：密码通常需要至少 8 个字符。</li><li>字符类型： <ul><li>至少包含一个小写字母（a-z）。</li><li>至少包含一个大写字母（A-Z）。</li><li>至少包含一个数字（0-9）。</li><li>至少包含一个特殊字符（如 !@#$%^&amp;*() 等）。</li></ul></li><li>不应包含用户的用户名：密码不能包含与用户名称相同的部分。</li></ol><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> USER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;复杂密码!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>现在就可以连接成功了。</p>',28)]))}const u=i(l,[["render",n]]);export{c as __pageData,u as default};
